<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head') %>
  <title><%= blog.title %></title>
</head>
<body>

  <%- include('./partials/nav') %>

  <div class="container mt-4">

    <div class="card shadow-sm">

      <% if (blog.coverImageURL) { %>
        <img 
          src="<%= blog.coverImageURL %>" 
          class="card-img-top"
          style="max-height: 400px; object-fit: cover;"
          alt="Blog Image"
        >
      <% } %>

      <div class="card-body">
        <h3 class="card-title"><%= blog.title %></h3>
        <p class="card-text"><%= blog.body %></p>
      </div>

      <!-- âœ… Author Section -->
      <% if (blog.createdBy && blog.createdBy.fullName) { %>
        <div class="card-footer d-flex align-items-center gap-3">

          <img 
            src="<%= blog.createdBy.profileImageURL || 'https://via.placeholder.com/50' %>" 
            width="50"
            height="50"
            style="border-radius: 50%; object-fit: cover;"
          />

          <strong><%= blog.createdBy.fullName %></strong>

        </div>
      <% } %>

    </div>


   

    <div class="card-body">
  <h3 class="card-title"><%= blog.title %></h3>
  <p class="card-text"><%= blog.body %></p>
</div>

<!-- âœ… COMMENT FORM -->
<form action="/blog/comment/<%= blog._id %>" method="POST" class="mt-3">
  <textarea name="content" class="form-control mb-2" placeholder="Write a comment..." required></textarea>
  <button class="btn btn-primary">Comment</button>
</form>

<!-- âœ… COMMENTS LIST -->
<h5 class="mt-4">Comments</h5>

<% if (comments && comments.length > 0) { %>
  <% comments.forEach(comment => { %>
    <div class="border p-2 mb-2 rounded">
      <strong><%= comment.createdBy.fullName %></strong><br>
      <%= comment.content %>
    </div>
  <% }) %>
<% } else { %>
  <p>No comments yet ðŸ˜¢</p>
<% } %>


  <%- include('./partials/scripts') %>

</body>
</html>
